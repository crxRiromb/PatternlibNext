@use 'sass:map';

@mixin generate-component-variant-theme($component, $variant, $variant-config, $theme-palette) {
  // For all roles (background, border, text, etc.)
  @each $role, $states in $variant-config {
    // For each state (default, hover, active, etc.)
    @each $state, $color-role in $states {
      @if map.has-key($theme-palette, $color-role) {
        $color-value: map.get($theme-palette, $color-role);

        // If the 'state' is 'default', it is omitted.
        $variable-name: if(
          $state == 'default',
          '--color-#{$component}-#{$variant}-#{$role}',
          '--color-#{$component}-#{$variant}-#{$role}-#{$state}'
        );

        #{$variable-name}: #{$color-value};
      } @else {
        @warn "Color role '#{$color-role}' for component '#{$component}' not found.";
      }
    }
  }
}
